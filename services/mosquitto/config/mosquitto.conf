# --- Fixed Mosquitto Config for IGEN Shop Assistant ---

# Normal MQTT listener (for ESP32s, backend, etc.)
listener 1883
protocol mqtt

# WebSocket listener (for browser frontends / MQTTX Web)
listener 9001
protocol websockets

allow_anonymous true

# Enable persistence so retained messages survive container restarts
persistence true
persistence_location /mosquitto/data/

# Log to stdout so logs show up in `docker logs mqtt`
log_dest stdout
